# =============================================================================
# AUCTION SYSTEM UNIFIED ENVIRONMENT CONFIGURATION - EXAMPLE
# =============================================================================
# Copy this file to .env and configure for your environment
# Single .env file supporting dev/mock/prod modes via APP_MODE

# =============================================================================
# CORE CONFIGURATION
# =============================================================================

# Application Mode - Controls which settings are used
# Options: dev, mock, prod
APP_MODE=dev

# API Server Configuration (used by all modes)
API_HOST=0.0.0.0
API_PORT=8000
DEBUG=true
LOG_LEVEL=debug

# Database SQL Query Logging (set to 'true' to enable verbose SQL output)
SQL_DEBUG=false

# App Base URL for internal links (used by Telegram, etc.)
APP_BASE_URL=http://localhost:3000

# =============================================================================
# DATABASE CONFIGURATION (dev/prod only)
# =============================================================================

# Development Database (local PostgreSQL via Docker)
DEV_DATABASE_URL=postgresql://postgres:password@localhost:5433/auction_dev

# Production Database 
PROD_DATABASE_URL=postgresql://username:password@prod-db-host:5432/auction_prod

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Enabled Networks (mode-specific)
DEV_NETWORKS_ENABLED=local
MOCK_NETWORKS_ENABLED=ethereum,polygon,arbitrum,optimism,base,local
PROD_NETWORKS_ENABLED=ethereum,polygon,arbitrum,optimism,base

# =============================================================================
# DEVELOPMENT MODE CONFIGURATION
# =============================================================================

# Local blockchain (Anvil)
DEV_ANVIL_RPC_URL=http://localhost:8545
DEV_CHAIN_ID=31337

# Factory contract on local network
DEV_FACTORY_ADDRESS=0x335796f7A0F72368D1588839e38f163d90C92C80
DEV_START_BLOCK=0

# =============================================================================
# PRODUCTION MODE CONFIGURATION
# =============================================================================

# Global Production Settings
PROD_WEB3_INFURA_PROJECT_ID=your_production_infura_key

# Network-specific RPC URLs (replace with your provider keys)
PROD_ETHEREUM_RPC_URL=https://mainnet.infura.io/v3/your_key
PROD_POLYGON_RPC_URL=https://polygon-mainnet.infura.io/v3/your_key
PROD_ARBITRUM_RPC_URL=https://arbitrum-mainnet.infura.io/v3/your_key
PROD_OPTIMISM_RPC_URL=https://optimism-mainnet.infura.io/v3/your_key
PROD_BASE_RPC_URL=https://base-mainnet.infura.io/v3/your_key

# Network-specific Factory Addresses (replace with actual deployed addresses)
PROD_ETHEREUM_FACTORY_ADDRESS=0x_ETHEREUM_FACTORY_ADDRESS
PROD_POLYGON_FACTORY_ADDRESS=0x_POLYGON_FACTORY_ADDRESS
PROD_ARBITRUM_FACTORY_ADDRESS=0x_ARBITRUM_FACTORY_ADDRESS
PROD_OPTIMISM_FACTORY_ADDRESS=0x_OPTIMISM_FACTORY_ADDRESS
PROD_BASE_FACTORY_ADDRESS=0x_BASE_FACTORY_ADDRESS

# Network-specific Start Blocks (set to deployment block for each network)
PROD_ETHEREUM_START_BLOCK=18000000
PROD_POLYGON_START_BLOCK=45000000
PROD_ARBITRUM_START_BLOCK=100000000
PROD_OPTIMISM_START_BLOCK=100000000
PROD_BASE_START_BLOCK=1000000

# =============================================================================
# REDIS CONFIGURATION (with optional ACL auth)
# =============================================================================

# Either provide REDIS_URL directly (supports redis://user:pass@host:port/db)
REDIS_URL=
# Or build from parts (used if REDIS_URL is empty)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_TLS=false

# Optional ACL users (preferred). If set, scripts will use these for role-specific URLs
REDIS_PUBLISHER_USER=publisher
REDIS_PUBLISHER_PASS=
REDIS_CONSUMER_USER=consumer
REDIS_CONSUMER_PASS=

# Stream keys
REDIS_STREAM_KEY=events
REDIS_DLQ_KEY=events:dlq

# Optional: disable default Redis user after configuring ACLs
REDIS_DISABLE_DEFAULT_USER=false

# Relay Service Configuration
RELAY_BATCH_SIZE=100
RELAY_POLL_INTERVAL_MS=300
RELAY_RETRY_LIMIT=5

# =============================================================================
# TELEGRAM BOT CONFIGURATION
# =============================================================================

# Telegram Bot Token (shared across all groups) - get from @BotFather
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz1234567890

# Multiple Group Support - add your group/channel IDs here
# Use negative IDs for groups/supergroups, positive for private chats
# Get group IDs by adding the bot to your group and checking logs

TELEGRAM_CHAT_ID=-1001234567890
TELEGRAM_GROUP_1_ID=-1001234567890
TELEGRAM_WHALE_GROUP_ID=-1009876543210
TELEGRAM_DEV_GROUP_ID=-1005555555555

# Example additional groups:
# TELEGRAM_TEAM_GROUP_ID=-1002468013579
# TELEGRAM_PUBLIC_GROUP_ID=-1001357924680

# =============================================================================
# PRICE SERVICES CONFIGURATION
# =============================================================================

# Quote API Maximum Age (in minutes) - Only process price requests within this timeframe
# YPM (ypricemagic) processes ALL requests regardless of age for historical accuracy
# Quote APIs (ODOS, ENSO) only process recent requests for spot pricing
DEV_QUOTE_API_MAX_AGE_MINUTES=10
PROD_QUOTE_API_MAX_AGE_MINUTES=15

# Price Service API Keys (optional for better rate limits)
ODOS_API_KEY=
ENSO_API_KEY=

# =============================================================================
# MOCK MODE CONFIGURATION  
# =============================================================================

# Mock mode requires minimal configuration - everything is hardcoded
# UI will show realistic test data for all networks
MOCK_API_SERVER=simple_server.py

# =============================================================================
# LEGACY COMPATIBILITY VARIABLES (auto-set based on APP_MODE)
# =============================================================================
# These are set dynamically by run.sh script - leave empty in .env file

DATABASE_URL=
NETWORKS_ENABLED=
CORS_ORIGINS=
ANVIL_RPC_URL=
FACTORY_ADDRESS=
START_BLOCK=
WEB3_INFURA_PROJECT_ID=
ETHEREUM_RPC_URL=
POLYGON_RPC_URL=
ARBITRUM_RPC_URL=
OPTIMISM_RPC_URL=
BASE_RPC_URL=
ETHEREUM_FACTORY_ADDRESS=
POLYGON_FACTORY_ADDRESS=
ARBITRUM_FACTORY_ADDRESS=
OPTIMISM_FACTORY_ADDRESS=
BASE_FACTORY_ADDRESS=
ETHEREUM_START_BLOCK=
POLYGON_START_BLOCK=
ARBITRUM_START_BLOCK=
OPTIMISM_START_BLOCK=
BASE_START_BLOCK=

# =============================================================================
# QUICK MODE SWITCHING GUIDE
# =============================================================================
# To switch modes:
#
# 1. Edit APP_MODE above to: dev, mock, or prod
# 2. Run: ./run.sh [mode]
#
# The run.sh script automatically configures the legacy variables
# based on your APP_MODE selection.
#
# Examples:
# APP_MODE=mock  + ./run.sh mock  → UI testing (10 seconds)
# APP_MODE=dev   + ./run.sh dev   → Full development (60 seconds)  
# APP_MODE=prod  + ./run.sh prod  → Production deployment (5 minutes)
# =============================================================================
